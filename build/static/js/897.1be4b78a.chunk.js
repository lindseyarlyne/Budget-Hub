"use strict";(self.webpackChunkbudget_hub=self.webpackChunkbudget_hub||[]).push([[897],{853:(e,t,a)=>{a.d(t,{mC:()=>c,DF:()=>o,Oo:()=>m,Xl:()=>d,Te:()=>u});var s=a(950);const n=async()=>(await new Promise(e=>setTimeout(e,500)),{income:[{id:1,amount:3500,category:"Salary",date:"2024-01-15"},{id:2,amount:500,category:"Freelance",date:"2024-01-20"}],expenses:[{id:1,amount:1200,category:"Housing",date:"2024-01-01"},{id:2,amount:400,category:"Food & Dining",date:"2024-01-05"},{id:3,amount:200,category:"Transportation",date:"2024-01-10"}]}),r=async()=>(await new Promise(e=>setTimeout(e,300)),[{id:1,startDate:"2024-01-01",endDate:"2024-01-15",totalIncome:2e3,totalExpenses:1500,remaining:500,isCurrent:!1},{id:2,startDate:"2024-01-16",endDate:"2024-01-31",totalIncome:2e3,totalExpenses:1800,remaining:200,isCurrent:!0}]),l=async()=>(await new Promise(e=>setTimeout(e,400)),{goal:1e4,entries:[{id:1,amount:500,date:"2024-01-15",type:"deposit"},{id:2,amount:300,date:"2024-01-31",type:"deposit"},{id:3,amount:600,date:"2024-02-15",type:"deposit"}]});const i=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e5;this.cache=new Map,this.maxAge=e}get(e){const t=this.cache.get(e);return t?Date.now()-t.timestamp>this.maxAge?(this.cache.delete(e),null):t.data:null}set(e,t){this.cache.set(e,{data:t,timestamp:Date.now()})}clear(){this.cache.clear()}},o=()=>{const[e,t]=(0,s.useState)(null),[a,o]=(0,s.useState)(null),[c,d]=(0,s.useState)(null),[u,m]=(0,s.useState)(!0),[g,h]=(0,s.useState)(null),v=(0,s.useCallback)(async()=>{try{m(!0),h(null);const e=i.get("budgetData");if(e)return t(e),void m(!1);const a=await n();i.set("budgetData",a),t(a)}catch(e){h(e)}finally{m(!1)}},[]),b=(0,s.useCallback)(async()=>{try{const e=i.get("payPeriods");if(e)return void o(e);const t=await r();i.set("payPeriods",t),o(t)}catch(e){console.error("Failed to fetch pay periods:",e)}},[]),p=(0,s.useCallback)(async()=>{try{const e=i.get("savingsData");if(e)return void d(e);const t=await l();i.set("savingsData",t),d(t)}catch(e){console.error("Failed to fetch savings data:",e)}},[]);(0,s.useEffect)(()=>{(async()=>{await Promise.all([v(),b(),p()])})()},[v,b,p]);const x=(0,s.useCallback)(()=>{i.clear(),v(),b(),p()},[v,b,p]);return(0,s.useMemo)(()=>({budgetData:e,payPeriods:a,savingsData:c,loading:u,error:g,refreshData:x}),[e,a,c,u,g,x])},c=()=>{const[e,t]=(0,s.useState)(!1),a=(0,s.useCallback)(async e=>{t(!0);try{return await new Promise(e=>setTimeout(e,1e3)),i.clear(),console.log("Added budget entry:",e),{success:!0}}catch(a){throw console.error("Failed to add budget entry:",a),a}finally{t(!1)}},[]),n=(0,s.useCallback)(async(e,a)=>{t(!0);try{return await new Promise(e=>setTimeout(e,800)),i.clear(),console.log("Updated budget entry:",e,a),{success:!0}}catch(s){throw console.error("Failed to update budget entry:",s),s}finally{t(!1)}},[]),r=(0,s.useCallback)(async e=>{t(!0);try{return await new Promise(e=>setTimeout(e,600)),i.clear(),console.log("Deleted budget entry:",e),{success:!0}}catch(a){throw console.error("Failed to delete budget entry:",a),a}finally{t(!1)}},[]);return(0,s.useMemo)(()=>({addBudgetEntry:a,updateBudgetEntry:n,deleteBudgetEntry:r,loading:e}),[a,n,r,e])},d=(e,t)=>{const[a,n]=(0,s.useState)({}),r=(0,s.useCallback)((e,t,a)=>a?!a.required||t&&""!==t?t&&a.min&&Number(t)<a.min?a.message||`${e} must be at least ${a.min}`:t&&a.max&&Number(t)>a.max?a.message||`${e} must be no more than ${a.max}`:t&&a.minLength&&t.length<a.minLength?a.message||`${e} must be at least ${a.minLength} characters`:t&&a.maxLength&&t.length>a.maxLength?a.message||`${e} must be no more than ${a.maxLength} characters`:t&&a.pattern&&!a.pattern.test(t)?a.message||`${e} format is invalid`:t&&a.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?a.message||"Invalid email format":null:a.message||`${e} is required`:null,[]),l=(0,s.useCallback)(()=>{const a={};let s=!0;return Object.keys(t).forEach(n=>{const l=r(n,e[n],t[n]);l&&(a[n]=l,s=!1)}),n(a),s},[e,t,r]),i=(0,s.useCallback)(a=>{const s=r(a,e[a],t[a]);return n(e=>({...e,[a]:s})),!s},[e,t,r]),o=(0,s.useCallback)(()=>{n({})},[]),c=(0,s.useMemo)(()=>{const s=Object.values(a).some(e=>null!==e&&""!==e),n=Object.keys(t).every(a=>{if(t[a].required){const t=e[a];return null!==t&&void 0!==t&&""!==t}return!0});return!s&&n},[a,e,t]);return{errors:a,validate:l,validateSingleField:i,clearErrors:o,isValid:c}},u=e=>{let{items:t,itemHeight:a,containerHeight:n,overscan:r=5}=e;const[l,i]=(0,s.useState)(0),o=(0,s.useRef)(null),c=(0,s.useRef)([]),d=(0,s.useMemo)(()=>{const e=Math.floor(l/a),s=Math.ceil(n/a),i=Math.min(e+s+r,t.length);return{start:Math.max(0,e-r),end:i}},[l,a,n,r,t.length]),u=(0,s.useMemo)(()=>{const e=[];for(let s=d.start;s<d.end;s++)t[s]&&e.push({index:s,item:t[s],top:s*a});return e},[t,d,a]),m=(0,s.useCallback)(()=>{o.current&&i(o.current.scrollTop)},[]),g=(0,s.useCallback)(()=>{let e=!1;return()=>{e||(requestAnimationFrame(()=>{m(),e=!1}),e=!0)}},[m]),h=(0,s.useCallback)(e=>{if(o.current&&e>=0&&e<t.length){const t=e*a;o.current.scrollTop=t,i(t)}},[t.length,a]);(0,s.useEffect)(()=>{const e=o.current;if(!e)return;const t=g();return e.addEventListener("scroll",t,{passive:!0}),()=>{e.removeEventListener("scroll",t)}},[g]);const v=t.length*a,b=(0,s.useMemo)(()=>({height:n,overflow:"auto",position:"relative"}),[n]),p=(0,s.useMemo)(()=>({height:v,position:"relative"}),[v]);return{containerRef:o,itemRefs:c,visibleItems:u,scrollToIndex:h,containerStyle:b,innerStyle:p,totalHeight:v}},m=(e,t)=>{const a=(0,s.useMemo)(()=>{if(!e||0===e.length)return[];const a=new Date;let s;switch(t){case"3months":s=new Date(a.getFullYear(),a.getMonth()-3,a.getDate());break;case"6months":s=new Date(a.getFullYear(),a.getMonth()-6,a.getDate());break;case"1year":s=new Date(a.getFullYear()-1,a.getMonth(),a.getDate());break;default:s=null}const n=[...s?e.filter(e=>new Date(e.date)>=s):e].sort((e,t)=>new Date(e.date)-new Date(t.date));let r=0;return n.map(e=>(r+=e.amount,{date:e.date,amount:e.amount,cumulative:r,formattedDate:new Date(e.date).toLocaleDateString()}))},[e,t]),n=(0,s.useMemo)(()=>{if(a.length<2)return null;const e=a[0].cumulative,t=a[a.length-1].cumulative-e,s=e>0?t/e*100:0,n=a.length-1,r=n>0?t/n:0;return{growth:t,growthPercentage:s.toFixed(1),averageGrowth:r.toFixed(2),direction:t>0?"up":t<0?"down":"stable"}},[a]),r=(0,s.useMemo)(()=>({labels:a.map(e=>e.formattedDate),datasets:[{label:"Cumulative Savings",data:a.map(e=>e.cumulative),borderColor:"#4CAF50",backgroundColor:"rgba(76, 175, 80, 0.1)",tension:.4,fill:!0},{label:"Monthly Contributions",data:a.map(e=>e.amount),borderColor:"#2196F3",backgroundColor:"rgba(33, 150, 243, 0.1)",tension:.4,fill:!1}]}),[a]),l=(0,s.useMemo)(()=>({labels:a.map(e=>e.formattedDate),datasets:[{label:"Monthly Savings",data:a.map(e=>e.amount),backgroundColor:a.map((e,t)=>`rgba(76, 175, 80, ${.3+t/a.length*.7})`),borderColor:"#4CAF50",borderWidth:1}]}),[a]),i=(0,s.useMemo)(()=>{if(0===a.length)return null;const e=a.map(e=>e.amount),t=e.reduce((e,t)=>e+t,0),s=t/e.length,n=Math.min(...e),r=Math.max(...e),l=e.reduce((e,t)=>e+Math.pow(t-s,2),0)/e.length,i=Math.sqrt(l),o=[...e].sort((e,t)=>e-t),c=o.length%2===0?(o[o.length/2-1]+o[o.length/2])/2:o[Math.floor(o.length/2)];return{total:t.toFixed(2),average:s.toFixed(2),median:c.toFixed(2),min:n.toFixed(2),max:r.toFixed(2),standardDeviation:i.toFixed(2),consistency:i<.3*s?"High":i<.6*s?"Medium":"Low"}},[a]);return{chartData:a,trendData:n,lineChartData:r,barChartData:l,statistics:i}}},897:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var s=a(950),n=a(853),r=a(414);const l=(0,s.memo)(()=>{const{savingsData:e,loading:t,error:a}=(0,n.DF)(),[l,m]=(0,s.useState)("6months"),[g,h]=(0,s.useState)((null===e||void 0===e?void 0:e.goal)||5e3),v=(0,s.useMemo)(()=>{var t,a;if(!e)return null;const s=(null===(t=e.entries)||void 0===t?void 0:t.reduce((e,t)=>e+t.amount,0))||0,n=s/((null===(a=e.entries)||void 0===a?void 0:a.length)||1),r=s/g*100,l=g>s?Math.ceil((g-s)/n):0;return{totalSaved:s,monthlyAverage:n,progressPercentage:Math.min(r,100),monthsToGoal:l,isGoalMet:s>=g}},[e,g]),b=(0,n.Oo)(null===e||void 0===e?void 0:e.entries,l),p=(0,s.useMemo)(()=>{if(null===e||void 0===e||!e.entries||e.entries.length<2)return null;const t=e.entries.slice(-3),a=e.entries.slice(-6,-3),s=t.reduce((e,t)=>e+t.amount,0)/t.length,n=a.reduce((e,t)=>e+t.amount,0)/(a.length||1),r=(s-n)/n*100;return{direction:r>5?"up":r<-5?"down":"stable",percentage:Math.abs(r).toFixed(1)}},[null===e||void 0===e?void 0:e.entries]),x=(0,s.useCallback)(e=>{m(e)},[]),y=(0,s.useCallback)(e=>{h(Number(e))},[]);return t?(0,r.jsx)("div",{className:"savings-loading",children:"Loading savings data..."}):a?(0,r.jsxs)("div",{className:"savings-error",children:["Error loading savings: ",a.message]}):v?(0,r.jsxs)("div",{className:"savings-tracker",children:[(0,r.jsxs)("div",{className:"savings-header",children:[(0,r.jsx)("h2",{children:"Savings Tracker"}),(0,r.jsxs)("div",{className:"time-range-selector",children:[(0,r.jsx)(i,{range:"3months",label:"3M",active:"3months"===l,onClick:x}),(0,r.jsx)(i,{range:"6months",label:"6M",active:"6months"===l,onClick:x}),(0,r.jsx)(i,{range:"1year",label:"1Y",active:"1year"===l,onClick:x}),(0,r.jsx)(i,{range:"all",label:"All",active:"all"===l,onClick:x})]})]}),(0,r.jsxs)("div",{className:"savings-overview",children:[(0,r.jsx)(o,{title:"Total Saved",value:`$${v.totalSaved.toLocaleString()}`,trend:p,type:"total"}),(0,r.jsx)(o,{title:"Monthly Average",value:`$${v.monthlyAverage.toLocaleString()}`,type:"average"}),(0,r.jsx)(o,{title:"Goal Progress",value:`${v.progressPercentage.toFixed(1)}%`,type:"progress",isGoalMet:v.isGoalMet}),(0,r.jsx)(o,{title:"Months to Goal",value:v.isGoalMet?"Goal Met!":v.monthsToGoal.toString(),type:"projection"})]}),(0,r.jsx)("div",{className:"savings-goal",children:(0,r.jsx)(c,{current:v.totalSaved,goal:g,onGoalUpdate:y})}),(0,r.jsx)("div",{className:"savings-chart",children:(0,r.jsx)(d,{data:b,timeRange:l})}),(0,r.jsx)("div",{className:"savings-insights",children:(0,r.jsx)(u,{metrics:v,trend:p,timeRange:l})})]}):(0,r.jsx)("div",{className:"savings-empty",children:"No savings data available"})}),i=(0,s.memo)(e=>{let{range:t,label:a,active:s,onClick:n}=e;return(0,r.jsx)("button",{className:"time-range-btn "+(s?"active":""),onClick:()=>n(t),children:a})}),o=(0,s.memo)(e=>{let{title:t,value:a,trend:s,type:n,isGoalMet:l}=e;return(0,r.jsxs)("div",{className:`savings-card savings-card--${n} ${l?"goal-met":""}`,children:[(0,r.jsx)("h4",{children:t}),(0,r.jsx)("div",{className:"savings-value",children:a}),s&&(0,r.jsxs)("div",{className:`trend trend--${s.direction}`,children:[(0,r.jsx)("span",{className:"trend-icon",children:"up"===s.direction?"\u2197":"down"===s.direction?"\u2198":"\u2192"}),(0,r.jsx)("span",{className:"trend-text",children:"stable"===s.direction?"Stable":`${s.percentage}%`})]})]})}),c=(0,s.memo)(e=>{let{current:t,goal:a,onGoalUpdate:n}=e;const[l,i]=(0,s.useState)(!1),[o,c]=(0,s.useState)(a),d=(0,s.useCallback)(()=>{n(o),i(!1)},[o,n]),u=Math.min(t/a*100,100);return(0,r.jsxs)("div",{className:"goal-tracker",children:[(0,r.jsxs)("div",{className:"goal-header",children:[(0,r.jsx)("h3",{children:"Savings Goal"}),l?(0,r.jsxs)("div",{className:"goal-edit",children:[(0,r.jsx)("input",{type:"number",value:o,onChange:e=>c(Number(e.target.value)),className:"goal-input"}),(0,r.jsx)("button",{onClick:d,className:"btn btn-sm",children:"Save"}),(0,r.jsx)("button",{onClick:()=>i(!1),className:"btn btn-sm btn-outline",children:"Cancel"})]}):(0,r.jsxs)("button",{onClick:()=>i(!0),className:"btn btn-sm btn-outline",children:["Edit Goal ($",a.toLocaleString(),")"]})]}),(0,r.jsxs)("div",{className:"goal-progress",children:[(0,r.jsx)("div",{className:"progress-bar",children:(0,r.jsx)("div",{className:"progress-fill",style:{width:`${u}%`}})}),(0,r.jsxs)("div",{className:"progress-labels",children:[(0,r.jsx)("span",{children:"$0"}),(0,r.jsxs)("span",{children:["$",t.toLocaleString()," / $",a.toLocaleString()]})]})]})]})}),d=(0,s.memo)(e=>{let{data:t,timeRange:a}=e;return(0,r.jsxs)("div",{className:"savings-chart-container",children:[(0,r.jsx)("h3",{children:"Savings Over Time"}),(0,r.jsxs)("div",{className:"chart-placeholder",children:[(0,r.jsxs)("p",{children:["Chart showing savings progression over ",a]}),(0,r.jsxs)("p",{children:["Data points: ",(null===t||void 0===t?void 0:t.length)||0]})]})]})}),u=(0,s.memo)(e=>{let{metrics:t,trend:a,timeRange:n}=e;const l=(0,s.useMemo)(()=>{const e=[];return t.monthlyAverage<500&&e.push("Consider setting up automatic transfers to boost your savings rate."),"down"===(null===a||void 0===a?void 0:a.direction)&&e.push("Your savings rate has decreased recently. Review your budget to identify areas to cut back."),t.progressPercentage>75&&e.push("Great job! You're close to reaching your goal. Keep up the momentum!"),e},[t,a]);return(0,r.jsxs)("div",{className:"savings-insights",children:[(0,r.jsx)("h3",{children:"Insights & Tips"}),l.length>0?(0,r.jsx)("ul",{className:"insights-list",children:l.map((e,t)=>(0,r.jsx)("li",{className:"insight-item",children:e},t))}):(0,r.jsx)("p",{children:"Keep tracking your savings to get personalized insights!"})]})});l.displayName="SavingsTracker",i.displayName="TimeRangeButton",o.displayName="SavingsCard",c.displayName="GoalTracker",d.displayName="SavingsChart",u.displayName="SavingsInsights";const m=l}}]);