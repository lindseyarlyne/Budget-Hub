"use strict";(self.webpackChunkbudget_hub=self.webpackChunkbudget_hub||[]).push([[854],{853:(e,t,a)=>{a.d(t,{mC:()=>c,DF:()=>i,Oo:()=>m,Xl:()=>u,Te:()=>d});var n=a(950);const s=async()=>(await new Promise(e=>setTimeout(e,500)),{income:[{id:1,amount:3500,category:"Salary",date:"2024-01-15"},{id:2,amount:500,category:"Freelance",date:"2024-01-20"}],expenses:[{id:1,amount:1200,category:"Housing",date:"2024-01-01"},{id:2,amount:400,category:"Food & Dining",date:"2024-01-05"},{id:3,amount:200,category:"Transportation",date:"2024-01-10"}]}),r=async()=>(await new Promise(e=>setTimeout(e,300)),[{id:1,startDate:"2024-01-01",endDate:"2024-01-15",totalIncome:2e3,totalExpenses:1500,remaining:500,isCurrent:!1},{id:2,startDate:"2024-01-16",endDate:"2024-01-31",totalIncome:2e3,totalExpenses:1800,remaining:200,isCurrent:!0}]),o=async()=>(await new Promise(e=>setTimeout(e,400)),{goal:1e4,entries:[{id:1,amount:500,date:"2024-01-15",type:"deposit"},{id:2,amount:300,date:"2024-01-31",type:"deposit"},{id:3,amount:600,date:"2024-02-15",type:"deposit"}]});const l=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e5;this.cache=new Map,this.maxAge=e}get(e){const t=this.cache.get(e);return t?Date.now()-t.timestamp>this.maxAge?(this.cache.delete(e),null):t.data:null}set(e,t){this.cache.set(e,{data:t,timestamp:Date.now()})}clear(){this.cache.clear()}},i=()=>{const[e,t]=(0,n.useState)(null),[a,i]=(0,n.useState)(null),[c,u]=(0,n.useState)(null),[d,m]=(0,n.useState)(!0),[g,h]=(0,n.useState)(null),v=(0,n.useCallback)(async()=>{try{m(!0),h(null);const e=l.get("budgetData");if(e)return t(e),void m(!1);const a=await s();l.set("budgetData",a),t(a)}catch(e){h(e)}finally{m(!1)}},[]),y=(0,n.useCallback)(async()=>{try{const e=l.get("payPeriods");if(e)return void i(e);const t=await r();l.set("payPeriods",t),i(t)}catch(e){console.error("Failed to fetch pay periods:",e)}},[]),b=(0,n.useCallback)(async()=>{try{const e=l.get("savingsData");if(e)return void u(e);const t=await o();l.set("savingsData",t),u(t)}catch(e){console.error("Failed to fetch savings data:",e)}},[]);(0,n.useEffect)(()=>{(async()=>{await Promise.all([v(),y(),b()])})()},[v,y,b]);const p=(0,n.useCallback)(()=>{l.clear(),v(),y(),b()},[v,y,b]);return(0,n.useMemo)(()=>({budgetData:e,payPeriods:a,savingsData:c,loading:d,error:g,refreshData:p}),[e,a,c,d,g,p])},c=()=>{const[e,t]=(0,n.useState)(!1),a=(0,n.useCallback)(async e=>{t(!0);try{return await new Promise(e=>setTimeout(e,1e3)),l.clear(),console.log("Added budget entry:",e),{success:!0}}catch(a){throw console.error("Failed to add budget entry:",a),a}finally{t(!1)}},[]),s=(0,n.useCallback)(async(e,a)=>{t(!0);try{return await new Promise(e=>setTimeout(e,800)),l.clear(),console.log("Updated budget entry:",e,a),{success:!0}}catch(n){throw console.error("Failed to update budget entry:",n),n}finally{t(!1)}},[]),r=(0,n.useCallback)(async e=>{t(!0);try{return await new Promise(e=>setTimeout(e,600)),l.clear(),console.log("Deleted budget entry:",e),{success:!0}}catch(a){throw console.error("Failed to delete budget entry:",a),a}finally{t(!1)}},[]);return(0,n.useMemo)(()=>({addBudgetEntry:a,updateBudgetEntry:s,deleteBudgetEntry:r,loading:e}),[a,s,r,e])},u=(e,t)=>{const[a,s]=(0,n.useState)({}),r=(0,n.useCallback)((e,t,a)=>a?!a.required||t&&""!==t?t&&a.min&&Number(t)<a.min?a.message||`${e} must be at least ${a.min}`:t&&a.max&&Number(t)>a.max?a.message||`${e} must be no more than ${a.max}`:t&&a.minLength&&t.length<a.minLength?a.message||`${e} must be at least ${a.minLength} characters`:t&&a.maxLength&&t.length>a.maxLength?a.message||`${e} must be no more than ${a.maxLength} characters`:t&&a.pattern&&!a.pattern.test(t)?a.message||`${e} format is invalid`:t&&a.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?a.message||"Invalid email format":null:a.message||`${e} is required`:null,[]),o=(0,n.useCallback)(()=>{const a={};let n=!0;return Object.keys(t).forEach(s=>{const o=r(s,e[s],t[s]);o&&(a[s]=o,n=!1)}),s(a),n},[e,t,r]),l=(0,n.useCallback)(a=>{const n=r(a,e[a],t[a]);return s(e=>({...e,[a]:n})),!n},[e,t,r]),i=(0,n.useCallback)(()=>{s({})},[]),c=(0,n.useMemo)(()=>{const n=Object.values(a).some(e=>null!==e&&""!==e),s=Object.keys(t).every(a=>{if(t[a].required){const t=e[a];return null!==t&&void 0!==t&&""!==t}return!0});return!n&&s},[a,e,t]);return{errors:a,validate:o,validateSingleField:l,clearErrors:i,isValid:c}},d=e=>{let{items:t,itemHeight:a,containerHeight:s,overscan:r=5}=e;const[o,l]=(0,n.useState)(0),i=(0,n.useRef)(null),c=(0,n.useRef)([]),u=(0,n.useMemo)(()=>{const e=Math.floor(o/a),n=Math.ceil(s/a),l=Math.min(e+n+r,t.length);return{start:Math.max(0,e-r),end:l}},[o,a,s,r,t.length]),d=(0,n.useMemo)(()=>{const e=[];for(let n=u.start;n<u.end;n++)t[n]&&e.push({index:n,item:t[n],top:n*a});return e},[t,u,a]),m=(0,n.useCallback)(()=>{i.current&&l(i.current.scrollTop)},[]),g=(0,n.useCallback)(()=>{let e=!1;return()=>{e||(requestAnimationFrame(()=>{m(),e=!1}),e=!0)}},[m]),h=(0,n.useCallback)(e=>{if(i.current&&e>=0&&e<t.length){const t=e*a;i.current.scrollTop=t,l(t)}},[t.length,a]);(0,n.useEffect)(()=>{const e=i.current;if(!e)return;const t=g();return e.addEventListener("scroll",t,{passive:!0}),()=>{e.removeEventListener("scroll",t)}},[g]);const v=t.length*a,y=(0,n.useMemo)(()=>({height:s,overflow:"auto",position:"relative"}),[s]),b=(0,n.useMemo)(()=>({height:v,position:"relative"}),[v]);return{containerRef:i,itemRefs:c,visibleItems:d,scrollToIndex:h,containerStyle:y,innerStyle:b,totalHeight:v}},m=(e,t)=>{const a=(0,n.useMemo)(()=>{if(!e||0===e.length)return[];const a=new Date;let n;switch(t){case"3months":n=new Date(a.getFullYear(),a.getMonth()-3,a.getDate());break;case"6months":n=new Date(a.getFullYear(),a.getMonth()-6,a.getDate());break;case"1year":n=new Date(a.getFullYear()-1,a.getMonth(),a.getDate());break;default:n=null}const s=[...n?e.filter(e=>new Date(e.date)>=n):e].sort((e,t)=>new Date(e.date)-new Date(t.date));let r=0;return s.map(e=>(r+=e.amount,{date:e.date,amount:e.amount,cumulative:r,formattedDate:new Date(e.date).toLocaleDateString()}))},[e,t]),s=(0,n.useMemo)(()=>{if(a.length<2)return null;const e=a[0].cumulative,t=a[a.length-1].cumulative-e,n=e>0?t/e*100:0,s=a.length-1,r=s>0?t/s:0;return{growth:t,growthPercentage:n.toFixed(1),averageGrowth:r.toFixed(2),direction:t>0?"up":t<0?"down":"stable"}},[a]),r=(0,n.useMemo)(()=>({labels:a.map(e=>e.formattedDate),datasets:[{label:"Cumulative Savings",data:a.map(e=>e.cumulative),borderColor:"#4CAF50",backgroundColor:"rgba(76, 175, 80, 0.1)",tension:.4,fill:!0},{label:"Monthly Contributions",data:a.map(e=>e.amount),borderColor:"#2196F3",backgroundColor:"rgba(33, 150, 243, 0.1)",tension:.4,fill:!1}]}),[a]),o=(0,n.useMemo)(()=>({labels:a.map(e=>e.formattedDate),datasets:[{label:"Monthly Savings",data:a.map(e=>e.amount),backgroundColor:a.map((e,t)=>`rgba(76, 175, 80, ${.3+t/a.length*.7})`),borderColor:"#4CAF50",borderWidth:1}]}),[a]),l=(0,n.useMemo)(()=>{if(0===a.length)return null;const e=a.map(e=>e.amount),t=e.reduce((e,t)=>e+t,0),n=t/e.length,s=Math.min(...e),r=Math.max(...e),o=e.reduce((e,t)=>e+Math.pow(t-n,2),0)/e.length,l=Math.sqrt(o),i=[...e].sort((e,t)=>e-t),c=i.length%2===0?(i[i.length/2-1]+i[i.length/2])/2:i[Math.floor(i.length/2)];return{total:t.toFixed(2),average:n.toFixed(2),median:c.toFixed(2),min:s.toFixed(2),max:r.toFixed(2),standardDeviation:l.toFixed(2),consistency:l<.3*n?"High":l<.6*n?"Medium":"Low"}},[a]);return{chartData:a,trendData:s,lineChartData:r,barChartData:o,statistics:l}}},854:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var n=a(950),s=a(853),r=a(414);const o=(0,n.memo)(()=>{const{budgetData:e,loading:t,error:a}=(0,s.DF)(),[o,c]=(0,n.useState)("current"),u=(0,n.useMemo)(()=>{var t,a;if(!e)return null;const n=(null===(t=e.income)||void 0===t?void 0:t.reduce((e,t)=>e+t.amount,0))||0,s=(null===(a=e.expenses)||void 0===a?void 0:a.reduce((e,t)=>e+t.amount,0))||0;return{totalIncome:n,totalExpenses:s,remaining:n-s,savingsRate:n>0?((n-s)/n*100).toFixed(1):0}},[e]),d=(0,n.useMemo)(()=>{if(null===e||void 0===e||!e.expenses)return[];const t=e.expenses.reduce((e,t)=>{const a=t.category||"Other";return e[a]=(e[a]||0)+t.amount,e},{});return Object.entries(t).map(e=>{let[t,a]=e;return{category:t,amount:a}}).sort((e,t)=>t.amount-e.amount)},[null===e||void 0===e?void 0:e.expenses]),m=(0,n.useCallback)(e=>{c(e)},[]);return t?(0,r.jsx)("div",{className:"budget-overview-loading",children:"Loading budget data..."}):a?(0,r.jsxs)("div",{className:"budget-overview-error",children:["Error loading budget: ",a.message]}):u?(0,r.jsxs)("div",{className:"budget-overview",children:[(0,r.jsxs)("div",{className:"budget-header",children:[(0,r.jsx)("h2",{children:"Budget Overview"}),(0,r.jsxs)("select",{value:o,onChange:e=>m(e.target.value),className:"period-selector",children:[(0,r.jsx)("option",{value:"current",children:"Current Month"}),(0,r.jsx)("option",{value:"last",children:"Last Month"}),(0,r.jsx)("option",{value:"year",children:"This Year"})]})]}),(0,r.jsxs)("div",{className:"budget-cards",children:[(0,r.jsx)(l,{title:"Total Income",amount:u.totalIncome,type:"income"}),(0,r.jsx)(l,{title:"Total Expenses",amount:u.totalExpenses,type:"expense"}),(0,r.jsx)(l,{title:"Remaining",amount:u.remaining,type:u.remaining>=0?"positive":"negative"}),(0,r.jsx)(l,{title:"Savings Rate",amount:`${u.savingsRate}%`,type:"percentage"})]}),(0,r.jsxs)("div",{className:"category-breakdown",children:[(0,r.jsx)("h3",{children:"Expenses by Category"}),(0,r.jsx)("div",{className:"category-list",children:d.map(e=>{let{category:t,amount:a}=e;return(0,r.jsx)(i,{category:t,amount:a,total:u.totalExpenses},t)})})]})]}):(0,r.jsx)("div",{className:"budget-overview-empty",children:"No budget data available"})}),l=(0,n.memo)(e=>{let{title:t,amount:a,type:n}=e;return(0,r.jsxs)("div",{className:`budget-card budget-card--${n}`,children:[(0,r.jsx)("h4",{children:t}),(0,r.jsx)("span",{className:"amount",children:"string"===typeof a?a:`$${a.toLocaleString()}`})]})}),i=(0,n.memo)(e=>{let{category:t,amount:a,total:n}=e;const s=(a/n*100).toFixed(1);return(0,r.jsxs)("div",{className:"category-item",children:[(0,r.jsxs)("div",{className:"category-info",children:[(0,r.jsx)("span",{className:"category-name",children:t}),(0,r.jsxs)("span",{className:"category-amount",children:["$",a.toLocaleString()]})]}),(0,r.jsx)("div",{className:"category-bar",children:(0,r.jsx)("div",{className:"category-fill",style:{width:`${s}%`}})}),(0,r.jsxs)("span",{className:"category-percentage",children:[s,"%"]})]})});o.displayName="BudgetOverview",l.displayName="BudgetCard",i.displayName="CategoryItem";const c=o}}]);