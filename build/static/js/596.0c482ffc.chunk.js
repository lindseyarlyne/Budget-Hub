"use strict";(self.webpackChunkbudget_hub=self.webpackChunkbudget_hub||[]).push([[596],{596:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var r=a(950),n=a(853),s=a(414);const o=(0,r.memo)(()=>{const[e,t]=(0,r.useState)({type:"expense",amount:"",category:"",description:"",date:(new Date).toISOString().split("T")[0]}),{addBudgetEntry:a,loading:o}=(0,n.mC)(),l=(0,r.useMemo)(()=>({amount:{required:!0,min:.01,message:"Amount must be greater than 0"},category:{required:!0,message:"Category is required"},description:{required:!0,minLength:3,message:"Description must be at least 3 characters"}}),[]),{errors:i,validate:c,isValid:d}=(0,n.Xl)(e,l),u=(0,r.useMemo)(()=>"expense"===e.type?["Food & Dining","Transportation","Shopping","Entertainment","Bills & Utilities","Healthcare","Travel","Other"]:["Salary","Freelance","Investment","Business","Other"],[e.type]),m=(0,r.useCallback)(e=>a=>{const r=a.target.value;t(t=>({...t,[e]:"amount"===e?""===r?"":parseFloat(r)||0:r}))},[]),g=(0,r.useCallback)(e=>{t(t=>({...t,type:e.target.value,category:""}))},[]),h=(0,r.useCallback)(async r=>{if(r.preventDefault(),c())try{await a(e),t({type:"expense",amount:"",category:"",description:"",date:(new Date).toISOString().split("T")[0]})}catch(n){console.error("Failed to add entry:",n)}},[e,c,a]);return(0,s.jsxs)("div",{className:"entry-form",children:[(0,s.jsx)("h2",{children:"Add Budget Entry"}),(0,s.jsxs)("form",{onSubmit:h,noValidate:!0,children:[(0,s.jsxs)("div",{className:"form-row",children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"type",children:"Type"}),(0,s.jsxs)("select",{id:"type",value:e.type,onChange:g,className:"form-control",children:[(0,s.jsx)("option",{value:"expense",children:"Expense"}),(0,s.jsx)("option",{value:"income",children:"Income"})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"amount",children:"Amount"}),(0,s.jsx)("input",{id:"amount",type:"number",min:"0",step:"0.01",value:e.amount,onChange:m("amount"),className:"form-control "+(i.amount?"error":""),placeholder:"0.00","aria-describedby":i.amount?"amount-error":void 0}),i.amount&&(0,s.jsx)("span",{id:"amount-error",className:"error-message",role:"alert",children:i.amount})]})]}),(0,s.jsxs)("div",{className:"form-row",children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"category",children:"Category"}),(0,s.jsxs)("select",{id:"category",value:e.category,onChange:m("category"),className:"form-control "+(i.category?"error":""),"aria-describedby":i.category?"category-error":void 0,children:[(0,s.jsx)("option",{value:"",children:"Select a category"}),u.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),i.category&&(0,s.jsx)("span",{id:"category-error",className:"error-message",role:"alert",children:i.category})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"date",children:"Date"}),(0,s.jsx)("input",{id:"date",type:"date",value:e.date,onChange:m("date"),className:"form-control"})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"description",children:"Description"}),(0,s.jsx)("input",{id:"description",type:"text",value:e.description,onChange:m("description"),className:"form-control "+(i.description?"error":""),placeholder:"Enter a description","aria-describedby":i.description?"description-error":void 0}),i.description&&(0,s.jsx)("span",{id:"description-error",className:"error-message",role:"alert",children:i.description})]}),(0,s.jsx)("div",{className:"form-actions",children:(0,s.jsx)("button",{type:"submit",disabled:!d||o,className:"btn btn-primary",children:o?"Adding...":`Add ${e.type}`})})]})]})});o.displayName="EntryForm";const l=o},853:(e,t,a)=>{a.d(t,{mC:()=>c,DF:()=>i,Oo:()=>m,Xl:()=>d,Te:()=>u});var r=a(950);const n=async()=>(await new Promise(e=>setTimeout(e,500)),{income:[{id:1,amount:3500,category:"Salary",date:"2024-01-15"},{id:2,amount:500,category:"Freelance",date:"2024-01-20"}],expenses:[{id:1,amount:1200,category:"Housing",date:"2024-01-01"},{id:2,amount:400,category:"Food & Dining",date:"2024-01-05"},{id:3,amount:200,category:"Transportation",date:"2024-01-10"}]}),s=async()=>(await new Promise(e=>setTimeout(e,300)),[{id:1,startDate:"2024-01-01",endDate:"2024-01-15",totalIncome:2e3,totalExpenses:1500,remaining:500,isCurrent:!1},{id:2,startDate:"2024-01-16",endDate:"2024-01-31",totalIncome:2e3,totalExpenses:1800,remaining:200,isCurrent:!0}]),o=async()=>(await new Promise(e=>setTimeout(e,400)),{goal:1e4,entries:[{id:1,amount:500,date:"2024-01-15",type:"deposit"},{id:2,amount:300,date:"2024-01-31",type:"deposit"},{id:3,amount:600,date:"2024-02-15",type:"deposit"}]});const l=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e5;this.cache=new Map,this.maxAge=e}get(e){const t=this.cache.get(e);return t?Date.now()-t.timestamp>this.maxAge?(this.cache.delete(e),null):t.data:null}set(e,t){this.cache.set(e,{data:t,timestamp:Date.now()})}clear(){this.cache.clear()}},i=()=>{const[e,t]=(0,r.useState)(null),[a,i]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[u,m]=(0,r.useState)(!0),[g,h]=(0,r.useState)(null),p=(0,r.useCallback)(async()=>{try{m(!0),h(null);const e=l.get("budgetData");if(e)return t(e),void m(!1);const a=await n();l.set("budgetData",a),t(a)}catch(e){h(e)}finally{m(!1)}},[]),y=(0,r.useCallback)(async()=>{try{const e=l.get("payPeriods");if(e)return void i(e);const t=await s();l.set("payPeriods",t),i(t)}catch(e){console.error("Failed to fetch pay periods:",e)}},[]),b=(0,r.useCallback)(async()=>{try{const e=l.get("savingsData");if(e)return void d(e);const t=await o();l.set("savingsData",t),d(t)}catch(e){console.error("Failed to fetch savings data:",e)}},[]);(0,r.useEffect)(()=>{(async()=>{await Promise.all([p(),y(),b()])})()},[p,y,b]);const v=(0,r.useCallback)(()=>{l.clear(),p(),y(),b()},[p,y,b]);return(0,r.useMemo)(()=>({budgetData:e,payPeriods:a,savingsData:c,loading:u,error:g,refreshData:v}),[e,a,c,u,g,v])},c=()=>{const[e,t]=(0,r.useState)(!1),a=(0,r.useCallback)(async e=>{t(!0);try{return await new Promise(e=>setTimeout(e,1e3)),l.clear(),console.log("Added budget entry:",e),{success:!0}}catch(a){throw console.error("Failed to add budget entry:",a),a}finally{t(!1)}},[]),n=(0,r.useCallback)(async(e,a)=>{t(!0);try{return await new Promise(e=>setTimeout(e,800)),l.clear(),console.log("Updated budget entry:",e,a),{success:!0}}catch(r){throw console.error("Failed to update budget entry:",r),r}finally{t(!1)}},[]),s=(0,r.useCallback)(async e=>{t(!0);try{return await new Promise(e=>setTimeout(e,600)),l.clear(),console.log("Deleted budget entry:",e),{success:!0}}catch(a){throw console.error("Failed to delete budget entry:",a),a}finally{t(!1)}},[]);return(0,r.useMemo)(()=>({addBudgetEntry:a,updateBudgetEntry:n,deleteBudgetEntry:s,loading:e}),[a,n,s,e])},d=(e,t)=>{const[a,n]=(0,r.useState)({}),s=(0,r.useCallback)((e,t,a)=>a?!a.required||t&&""!==t?t&&a.min&&Number(t)<a.min?a.message||`${e} must be at least ${a.min}`:t&&a.max&&Number(t)>a.max?a.message||`${e} must be no more than ${a.max}`:t&&a.minLength&&t.length<a.minLength?a.message||`${e} must be at least ${a.minLength} characters`:t&&a.maxLength&&t.length>a.maxLength?a.message||`${e} must be no more than ${a.maxLength} characters`:t&&a.pattern&&!a.pattern.test(t)?a.message||`${e} format is invalid`:t&&a.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?a.message||"Invalid email format":null:a.message||`${e} is required`:null,[]),o=(0,r.useCallback)(()=>{const a={};let r=!0;return Object.keys(t).forEach(n=>{const o=s(n,e[n],t[n]);o&&(a[n]=o,r=!1)}),n(a),r},[e,t,s]),l=(0,r.useCallback)(a=>{const r=s(a,e[a],t[a]);return n(e=>({...e,[a]:r})),!r},[e,t,s]),i=(0,r.useCallback)(()=>{n({})},[]),c=(0,r.useMemo)(()=>{const r=Object.values(a).some(e=>null!==e&&""!==e),n=Object.keys(t).every(a=>{if(t[a].required){const t=e[a];return null!==t&&void 0!==t&&""!==t}return!0});return!r&&n},[a,e,t]);return{errors:a,validate:o,validateSingleField:l,clearErrors:i,isValid:c}},u=e=>{let{items:t,itemHeight:a,containerHeight:n,overscan:s=5}=e;const[o,l]=(0,r.useState)(0),i=(0,r.useRef)(null),c=(0,r.useRef)([]),d=(0,r.useMemo)(()=>{const e=Math.floor(o/a),r=Math.ceil(n/a),l=Math.min(e+r+s,t.length);return{start:Math.max(0,e-s),end:l}},[o,a,n,s,t.length]),u=(0,r.useMemo)(()=>{const e=[];for(let r=d.start;r<d.end;r++)t[r]&&e.push({index:r,item:t[r],top:r*a});return e},[t,d,a]),m=(0,r.useCallback)(()=>{i.current&&l(i.current.scrollTop)},[]),g=(0,r.useCallback)(()=>{let e=!1;return()=>{e||(requestAnimationFrame(()=>{m(),e=!1}),e=!0)}},[m]),h=(0,r.useCallback)(e=>{if(i.current&&e>=0&&e<t.length){const t=e*a;i.current.scrollTop=t,l(t)}},[t.length,a]);(0,r.useEffect)(()=>{const e=i.current;if(!e)return;const t=g();return e.addEventListener("scroll",t,{passive:!0}),()=>{e.removeEventListener("scroll",t)}},[g]);const p=t.length*a,y=(0,r.useMemo)(()=>({height:n,overflow:"auto",position:"relative"}),[n]),b=(0,r.useMemo)(()=>({height:p,position:"relative"}),[p]);return{containerRef:i,itemRefs:c,visibleItems:u,scrollToIndex:h,containerStyle:y,innerStyle:b,totalHeight:p}},m=(e,t)=>{const a=(0,r.useMemo)(()=>{if(!e||0===e.length)return[];const a=new Date;let r;switch(t){case"3months":r=new Date(a.getFullYear(),a.getMonth()-3,a.getDate());break;case"6months":r=new Date(a.getFullYear(),a.getMonth()-6,a.getDate());break;case"1year":r=new Date(a.getFullYear()-1,a.getMonth(),a.getDate());break;default:r=null}const n=[...r?e.filter(e=>new Date(e.date)>=r):e].sort((e,t)=>new Date(e.date)-new Date(t.date));let s=0;return n.map(e=>(s+=e.amount,{date:e.date,amount:e.amount,cumulative:s,formattedDate:new Date(e.date).toLocaleDateString()}))},[e,t]),n=(0,r.useMemo)(()=>{if(a.length<2)return null;const e=a[0].cumulative,t=a[a.length-1].cumulative-e,r=e>0?t/e*100:0,n=a.length-1,s=n>0?t/n:0;return{growth:t,growthPercentage:r.toFixed(1),averageGrowth:s.toFixed(2),direction:t>0?"up":t<0?"down":"stable"}},[a]),s=(0,r.useMemo)(()=>({labels:a.map(e=>e.formattedDate),datasets:[{label:"Cumulative Savings",data:a.map(e=>e.cumulative),borderColor:"#4CAF50",backgroundColor:"rgba(76, 175, 80, 0.1)",tension:.4,fill:!0},{label:"Monthly Contributions",data:a.map(e=>e.amount),borderColor:"#2196F3",backgroundColor:"rgba(33, 150, 243, 0.1)",tension:.4,fill:!1}]}),[a]),o=(0,r.useMemo)(()=>({labels:a.map(e=>e.formattedDate),datasets:[{label:"Monthly Savings",data:a.map(e=>e.amount),backgroundColor:a.map((e,t)=>`rgba(76, 175, 80, ${.3+t/a.length*.7})`),borderColor:"#4CAF50",borderWidth:1}]}),[a]),l=(0,r.useMemo)(()=>{if(0===a.length)return null;const e=a.map(e=>e.amount),t=e.reduce((e,t)=>e+t,0),r=t/e.length,n=Math.min(...e),s=Math.max(...e),o=e.reduce((e,t)=>e+Math.pow(t-r,2),0)/e.length,l=Math.sqrt(o),i=[...e].sort((e,t)=>e-t),c=i.length%2===0?(i[i.length/2-1]+i[i.length/2])/2:i[Math.floor(i.length/2)];return{total:t.toFixed(2),average:r.toFixed(2),median:c.toFixed(2),min:n.toFixed(2),max:s.toFixed(2),standardDeviation:l.toFixed(2),consistency:l<.3*r?"High":l<.6*r?"Medium":"Low"}},[a]);return{chartData:a,trendData:n,lineChartData:s,barChartData:o,statistics:l}}}}]);