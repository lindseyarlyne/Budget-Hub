"use strict";(self.webpackChunkbudget_hub=self.webpackChunkbudget_hub||[]).push([[281],{281:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var s=a(950),n=a(853),r=a(414);const o=(0,s.memo)(()=>{const{payPeriods:e,loading:t,error:a}=(0,n.DF)(),[o,c]=(0,s.useState)("date"),[d,u]=(0,s.useState)("desc"),m=(0,s.useMemo)(()=>e?[...e].sort((e,t)=>{let a=e[o],s=t[o];return"date"===o&&(a=new Date(a),s=new Date(s)),"asc"===d?a>s?1:-1:a<s?1:-1}):[],[e,o,d]),{containerRef:h,itemRefs:g,visibleItems:b,scrollToIndex:p}=(0,n.Te)({items:m,itemHeight:80,containerHeight:600}),y=(0,s.useCallback)(e=>{o===e?u(e=>"asc"===e?"desc":"asc"):(c(e),u("desc"))},[o]),x=(0,s.useCallback)(()=>{const e=m.findIndex(e=>e.isCurrent);e>=0&&p(e)},[m,p]);return t?(0,r.jsx)("div",{className:"pay-period-loading",children:"Loading pay periods..."}):a?(0,r.jsxs)("div",{className:"pay-period-error",children:["Error loading pay periods: ",a.message]}):(0,r.jsxs)("div",{className:"pay-period-list",children:[(0,r.jsxs)("div",{className:"pay-period-header",children:[(0,r.jsx)("h2",{children:"Pay Periods"}),(0,r.jsx)("div",{className:"pay-period-controls",children:(0,r.jsx)("button",{onClick:x,className:"btn btn-secondary",children:"Jump to Current"})})]}),(0,r.jsxs)("div",{className:"pay-period-table",children:[(0,r.jsxs)("div",{className:"table-header",children:[(0,r.jsx)(l,{field:"date",label:"Date",sortBy:o,sortOrder:d,onSort:y}),(0,r.jsx)(l,{field:"income",label:"Income",sortBy:o,sortOrder:d,onSort:y}),(0,r.jsx)(l,{field:"expenses",label:"Expenses",sortBy:o,sortOrder:d,onSort:y}),(0,r.jsx)(l,{field:"remaining",label:"Remaining",sortBy:o,sortOrder:d,onSort:y}),(0,r.jsx)("div",{className:"table-header-cell",children:"Actions"})]}),(0,r.jsx)("div",{ref:h,className:"table-body",style:{height:"600px",overflow:"auto"},children:b.map(e=>{let{item:t,index:a}=e;return(0,r.jsx)(i,{ref:e=>g.current[a]=e,period:t,index:a},t.id)})})]}),0===m.length&&(0,r.jsx)("div",{className:"pay-period-empty",children:"No pay periods found. Add some budget entries to see them here."})]})}),l=(0,s.memo)(e=>{let{field:t,label:a,sortBy:s,sortOrder:n,onSort:o}=e;return(0,r.jsxs)("button",{className:"table-header-cell sortable "+(s===t?"active":""),onClick:()=>o(t),children:[a,s===t&&(0,r.jsx)("span",{className:`sort-icon ${n}`,children:"asc"===n?"\u2191":"\u2193"})]})}),i=(0,s.memo)(s.forwardRef((e,t)=>{let{period:a,index:n}=e;const o=(0,s.useCallback)(()=>{console.log("View details for period:",a.id)},[a.id]),l=(0,s.useCallback)(()=>{console.log("Edit period:",a.id)},[a.id]);return(0,r.jsxs)("div",{ref:t,className:`table-row ${a.isCurrent?"current":""} ${n%2===0?"even":"odd"}`,children:[(0,r.jsxs)("div",{className:"table-cell",children:[(0,r.jsxs)("div",{className:"period-date",children:[new Date(a.startDate).toLocaleDateString()," -",new Date(a.endDate).toLocaleDateString()]}),a.isCurrent&&(0,r.jsx)("span",{className:"current-badge",children:"Current"})]}),(0,r.jsxs)("div",{className:"table-cell income",children:["$",a.totalIncome.toLocaleString()]}),(0,r.jsxs)("div",{className:"table-cell expense",children:["$",a.totalExpenses.toLocaleString()]}),(0,r.jsxs)("div",{className:"table-cell remaining "+(a.remaining>=0?"positive":"negative"),children:["$",a.remaining.toLocaleString()]}),(0,r.jsxs)("div",{className:"table-cell actions",children:[(0,r.jsx)("button",{onClick:o,className:"btn btn-sm btn-outline",children:"View"}),(0,r.jsx)("button",{onClick:l,className:"btn btn-sm btn-outline",children:"Edit"})]})]})}));o.displayName="PayPeriodList",l.displayName="SortableHeader",i.displayName="PayPeriodRow";const c=o},853:(e,t,a)=>{a.d(t,{mC:()=>c,DF:()=>i,Oo:()=>m,Xl:()=>d,Te:()=>u});var s=a(950);const n=async()=>(await new Promise(e=>setTimeout(e,500)),{income:[{id:1,amount:3500,category:"Salary",date:"2024-01-15"},{id:2,amount:500,category:"Freelance",date:"2024-01-20"}],expenses:[{id:1,amount:1200,category:"Housing",date:"2024-01-01"},{id:2,amount:400,category:"Food & Dining",date:"2024-01-05"},{id:3,amount:200,category:"Transportation",date:"2024-01-10"}]}),r=async()=>(await new Promise(e=>setTimeout(e,300)),[{id:1,startDate:"2024-01-01",endDate:"2024-01-15",totalIncome:2e3,totalExpenses:1500,remaining:500,isCurrent:!1},{id:2,startDate:"2024-01-16",endDate:"2024-01-31",totalIncome:2e3,totalExpenses:1800,remaining:200,isCurrent:!0}]),o=async()=>(await new Promise(e=>setTimeout(e,400)),{goal:1e4,entries:[{id:1,amount:500,date:"2024-01-15",type:"deposit"},{id:2,amount:300,date:"2024-01-31",type:"deposit"},{id:3,amount:600,date:"2024-02-15",type:"deposit"}]});const l=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e5;this.cache=new Map,this.maxAge=e}get(e){const t=this.cache.get(e);return t?Date.now()-t.timestamp>this.maxAge?(this.cache.delete(e),null):t.data:null}set(e,t){this.cache.set(e,{data:t,timestamp:Date.now()})}clear(){this.cache.clear()}},i=()=>{const[e,t]=(0,s.useState)(null),[a,i]=(0,s.useState)(null),[c,d]=(0,s.useState)(null),[u,m]=(0,s.useState)(!0),[h,g]=(0,s.useState)(null),b=(0,s.useCallback)(async()=>{try{m(!0),g(null);const e=l.get("budgetData");if(e)return t(e),void m(!1);const a=await n();l.set("budgetData",a),t(a)}catch(e){g(e)}finally{m(!1)}},[]),p=(0,s.useCallback)(async()=>{try{const e=l.get("payPeriods");if(e)return void i(e);const t=await r();l.set("payPeriods",t),i(t)}catch(e){console.error("Failed to fetch pay periods:",e)}},[]),y=(0,s.useCallback)(async()=>{try{const e=l.get("savingsData");if(e)return void d(e);const t=await o();l.set("savingsData",t),d(t)}catch(e){console.error("Failed to fetch savings data:",e)}},[]);(0,s.useEffect)(()=>{(async()=>{await Promise.all([b(),p(),y()])})()},[b,p,y]);const x=(0,s.useCallback)(()=>{l.clear(),b(),p(),y()},[b,p,y]);return(0,s.useMemo)(()=>({budgetData:e,payPeriods:a,savingsData:c,loading:u,error:h,refreshData:x}),[e,a,c,u,h,x])},c=()=>{const[e,t]=(0,s.useState)(!1),a=(0,s.useCallback)(async e=>{t(!0);try{return await new Promise(e=>setTimeout(e,1e3)),l.clear(),console.log("Added budget entry:",e),{success:!0}}catch(a){throw console.error("Failed to add budget entry:",a),a}finally{t(!1)}},[]),n=(0,s.useCallback)(async(e,a)=>{t(!0);try{return await new Promise(e=>setTimeout(e,800)),l.clear(),console.log("Updated budget entry:",e,a),{success:!0}}catch(s){throw console.error("Failed to update budget entry:",s),s}finally{t(!1)}},[]),r=(0,s.useCallback)(async e=>{t(!0);try{return await new Promise(e=>setTimeout(e,600)),l.clear(),console.log("Deleted budget entry:",e),{success:!0}}catch(a){throw console.error("Failed to delete budget entry:",a),a}finally{t(!1)}},[]);return(0,s.useMemo)(()=>({addBudgetEntry:a,updateBudgetEntry:n,deleteBudgetEntry:r,loading:e}),[a,n,r,e])},d=(e,t)=>{const[a,n]=(0,s.useState)({}),r=(0,s.useCallback)((e,t,a)=>a?!a.required||t&&""!==t?t&&a.min&&Number(t)<a.min?a.message||`${e} must be at least ${a.min}`:t&&a.max&&Number(t)>a.max?a.message||`${e} must be no more than ${a.max}`:t&&a.minLength&&t.length<a.minLength?a.message||`${e} must be at least ${a.minLength} characters`:t&&a.maxLength&&t.length>a.maxLength?a.message||`${e} must be no more than ${a.maxLength} characters`:t&&a.pattern&&!a.pattern.test(t)?a.message||`${e} format is invalid`:t&&a.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?a.message||"Invalid email format":null:a.message||`${e} is required`:null,[]),o=(0,s.useCallback)(()=>{const a={};let s=!0;return Object.keys(t).forEach(n=>{const o=r(n,e[n],t[n]);o&&(a[n]=o,s=!1)}),n(a),s},[e,t,r]),l=(0,s.useCallback)(a=>{const s=r(a,e[a],t[a]);return n(e=>({...e,[a]:s})),!s},[e,t,r]),i=(0,s.useCallback)(()=>{n({})},[]),c=(0,s.useMemo)(()=>{const s=Object.values(a).some(e=>null!==e&&""!==e),n=Object.keys(t).every(a=>{if(t[a].required){const t=e[a];return null!==t&&void 0!==t&&""!==t}return!0});return!s&&n},[a,e,t]);return{errors:a,validate:o,validateSingleField:l,clearErrors:i,isValid:c}},u=e=>{let{items:t,itemHeight:a,containerHeight:n,overscan:r=5}=e;const[o,l]=(0,s.useState)(0),i=(0,s.useRef)(null),c=(0,s.useRef)([]),d=(0,s.useMemo)(()=>{const e=Math.floor(o/a),s=Math.ceil(n/a),l=Math.min(e+s+r,t.length);return{start:Math.max(0,e-r),end:l}},[o,a,n,r,t.length]),u=(0,s.useMemo)(()=>{const e=[];for(let s=d.start;s<d.end;s++)t[s]&&e.push({index:s,item:t[s],top:s*a});return e},[t,d,a]),m=(0,s.useCallback)(()=>{i.current&&l(i.current.scrollTop)},[]),h=(0,s.useCallback)(()=>{let e=!1;return()=>{e||(requestAnimationFrame(()=>{m(),e=!1}),e=!0)}},[m]),g=(0,s.useCallback)(e=>{if(i.current&&e>=0&&e<t.length){const t=e*a;i.current.scrollTop=t,l(t)}},[t.length,a]);(0,s.useEffect)(()=>{const e=i.current;if(!e)return;const t=h();return e.addEventListener("scroll",t,{passive:!0}),()=>{e.removeEventListener("scroll",t)}},[h]);const b=t.length*a,p=(0,s.useMemo)(()=>({height:n,overflow:"auto",position:"relative"}),[n]),y=(0,s.useMemo)(()=>({height:b,position:"relative"}),[b]);return{containerRef:i,itemRefs:c,visibleItems:u,scrollToIndex:g,containerStyle:p,innerStyle:y,totalHeight:b}},m=(e,t)=>{const a=(0,s.useMemo)(()=>{if(!e||0===e.length)return[];const a=new Date;let s;switch(t){case"3months":s=new Date(a.getFullYear(),a.getMonth()-3,a.getDate());break;case"6months":s=new Date(a.getFullYear(),a.getMonth()-6,a.getDate());break;case"1year":s=new Date(a.getFullYear()-1,a.getMonth(),a.getDate());break;default:s=null}const n=[...s?e.filter(e=>new Date(e.date)>=s):e].sort((e,t)=>new Date(e.date)-new Date(t.date));let r=0;return n.map(e=>(r+=e.amount,{date:e.date,amount:e.amount,cumulative:r,formattedDate:new Date(e.date).toLocaleDateString()}))},[e,t]),n=(0,s.useMemo)(()=>{if(a.length<2)return null;const e=a[0].cumulative,t=a[a.length-1].cumulative-e,s=e>0?t/e*100:0,n=a.length-1,r=n>0?t/n:0;return{growth:t,growthPercentage:s.toFixed(1),averageGrowth:r.toFixed(2),direction:t>0?"up":t<0?"down":"stable"}},[a]),r=(0,s.useMemo)(()=>({labels:a.map(e=>e.formattedDate),datasets:[{label:"Cumulative Savings",data:a.map(e=>e.cumulative),borderColor:"#4CAF50",backgroundColor:"rgba(76, 175, 80, 0.1)",tension:.4,fill:!0},{label:"Monthly Contributions",data:a.map(e=>e.amount),borderColor:"#2196F3",backgroundColor:"rgba(33, 150, 243, 0.1)",tension:.4,fill:!1}]}),[a]),o=(0,s.useMemo)(()=>({labels:a.map(e=>e.formattedDate),datasets:[{label:"Monthly Savings",data:a.map(e=>e.amount),backgroundColor:a.map((e,t)=>`rgba(76, 175, 80, ${.3+t/a.length*.7})`),borderColor:"#4CAF50",borderWidth:1}]}),[a]),l=(0,s.useMemo)(()=>{if(0===a.length)return null;const e=a.map(e=>e.amount),t=e.reduce((e,t)=>e+t,0),s=t/e.length,n=Math.min(...e),r=Math.max(...e),o=e.reduce((e,t)=>e+Math.pow(t-s,2),0)/e.length,l=Math.sqrt(o),i=[...e].sort((e,t)=>e-t),c=i.length%2===0?(i[i.length/2-1]+i[i.length/2])/2:i[Math.floor(i.length/2)];return{total:t.toFixed(2),average:s.toFixed(2),median:c.toFixed(2),min:n.toFixed(2),max:r.toFixed(2),standardDeviation:l.toFixed(2),consistency:l<.3*s?"High":l<.6*s?"Medium":"Low"}},[a]);return{chartData:a,trendData:n,lineChartData:r,barChartData:o,statistics:l}}}}]);