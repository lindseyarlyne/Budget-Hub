{"ast":null,"code":"import React,{memo,useMemo,useCallback,useState}from'react';import{useBudgetData}from'../hooks/useBudgetData';import{useChartData}from'../hooks/useChartData';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SavingsTracker=/*#__PURE__*/memo(()=>{const{savingsData,loading,error}=useBudgetData();const[timeRange,setTimeRange]=useState('6months');const[goalAmount,setGoalAmount]=useState((savingsData===null||savingsData===void 0?void 0:savingsData.goal)||5000);// Memoized savings calculations\nconst savingsMetrics=useMemo(()=>{var _savingsData$entries,_savingsData$entries2;if(!savingsData)return null;const totalSaved=((_savingsData$entries=savingsData.entries)===null||_savingsData$entries===void 0?void 0:_savingsData$entries.reduce((sum,entry)=>sum+entry.amount,0))||0;const monthlyAverage=totalSaved/(((_savingsData$entries2=savingsData.entries)===null||_savingsData$entries2===void 0?void 0:_savingsData$entries2.length)||1);const progressPercentage=totalSaved/goalAmount*100;const monthsToGoal=goalAmount>totalSaved?Math.ceil((goalAmount-totalSaved)/monthlyAverage):0;return{totalSaved,monthlyAverage,progressPercentage:Math.min(progressPercentage,100),monthsToGoal,isGoalMet:totalSaved>=goalAmount};},[savingsData,goalAmount]);// Memoized chart data for performance\nconst chartData=useChartData(savingsData===null||savingsData===void 0?void 0:savingsData.entries,timeRange);// Trend analysis\nconst savingsTrend=useMemo(()=>{if(!(savingsData!==null&&savingsData!==void 0&&savingsData.entries)||savingsData.entries.length<2)return null;const recentEntries=savingsData.entries.slice(-3);const olderEntries=savingsData.entries.slice(-6,-3);const recentAverage=recentEntries.reduce((sum,entry)=>sum+entry.amount,0)/recentEntries.length;const olderAverage=olderEntries.reduce((sum,entry)=>sum+entry.amount,0)/(olderEntries.length||1);const trendPercentage=(recentAverage-olderAverage)/olderAverage*100;return{direction:trendPercentage>5?'up':trendPercentage<-5?'down':'stable',percentage:Math.abs(trendPercentage).toFixed(1)};},[savingsData===null||savingsData===void 0?void 0:savingsData.entries]);const handleTimeRangeChange=useCallback(range=>{setTimeRange(range);},[]);const handleGoalUpdate=useCallback(newGoal=>{setGoalAmount(Number(newGoal));},[]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"savings-loading\",children:\"Loading savings data...\"});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"savings-error\",children:[\"Error loading savings: \",error.message]});}if(!savingsMetrics){return/*#__PURE__*/_jsx(\"div\",{className:\"savings-empty\",children:\"No savings data available\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"savings-tracker\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"savings-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Savings Tracker\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"time-range-selector\",children:[/*#__PURE__*/_jsx(TimeRangeButton,{range:\"3months\",label:\"3M\",active:timeRange==='3months',onClick:handleTimeRangeChange}),/*#__PURE__*/_jsx(TimeRangeButton,{range:\"6months\",label:\"6M\",active:timeRange==='6months',onClick:handleTimeRangeChange}),/*#__PURE__*/_jsx(TimeRangeButton,{range:\"1year\",label:\"1Y\",active:timeRange==='1year',onClick:handleTimeRangeChange}),/*#__PURE__*/_jsx(TimeRangeButton,{range:\"all\",label:\"All\",active:timeRange==='all',onClick:handleTimeRangeChange})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"savings-overview\",children:[/*#__PURE__*/_jsx(SavingsCard,{title:\"Total Saved\",value:`$${savingsMetrics.totalSaved.toLocaleString()}`,trend:savingsTrend,type:\"total\"}),/*#__PURE__*/_jsx(SavingsCard,{title:\"Monthly Average\",value:`$${savingsMetrics.monthlyAverage.toLocaleString()}`,type:\"average\"}),/*#__PURE__*/_jsx(SavingsCard,{title:\"Goal Progress\",value:`${savingsMetrics.progressPercentage.toFixed(1)}%`,type:\"progress\",isGoalMet:savingsMetrics.isGoalMet}),/*#__PURE__*/_jsx(SavingsCard,{title:\"Months to Goal\",value:savingsMetrics.isGoalMet?\"Goal Met!\":savingsMetrics.monthsToGoal.toString(),type:\"projection\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"savings-goal\",children:/*#__PURE__*/_jsx(GoalTracker,{current:savingsMetrics.totalSaved,goal:goalAmount,onGoalUpdate:handleGoalUpdate})}),/*#__PURE__*/_jsx(\"div\",{className:\"savings-chart\",children:/*#__PURE__*/_jsx(SavingsChart,{data:chartData,timeRange:timeRange})}),/*#__PURE__*/_jsx(\"div\",{className:\"savings-insights\",children:/*#__PURE__*/_jsx(SavingsInsights,{metrics:savingsMetrics,trend:savingsTrend,timeRange:timeRange})})]});});// Memoized sub-components\nconst TimeRangeButton=/*#__PURE__*/memo(_ref=>{let{range,label,active,onClick}=_ref;return/*#__PURE__*/_jsx(\"button\",{className:`time-range-btn ${active?'active':''}`,onClick:()=>onClick(range),children:label});});const SavingsCard=/*#__PURE__*/memo(_ref2=>{let{title,value,trend,type,isGoalMet}=_ref2;return/*#__PURE__*/_jsxs(\"div\",{className:`savings-card savings-card--${type} ${isGoalMet?'goal-met':''}`,children:[/*#__PURE__*/_jsx(\"h4\",{children:title}),/*#__PURE__*/_jsx(\"div\",{className:\"savings-value\",children:value}),trend&&/*#__PURE__*/_jsxs(\"div\",{className:`trend trend--${trend.direction}`,children:[/*#__PURE__*/_jsx(\"span\",{className:\"trend-icon\",children:trend.direction==='up'?'↗':trend.direction==='down'?'↘':'→'}),/*#__PURE__*/_jsx(\"span\",{className:\"trend-text\",children:trend.direction==='stable'?'Stable':`${trend.percentage}%`})]})]});});const GoalTracker=/*#__PURE__*/memo(_ref3=>{let{current,goal,onGoalUpdate}=_ref3;const[isEditing,setIsEditing]=useState(false);const[editValue,setEditValue]=useState(goal);const handleSave=useCallback(()=>{onGoalUpdate(editValue);setIsEditing(false);},[editValue,onGoalUpdate]);const progressWidth=Math.min(current/goal*100,100);return/*#__PURE__*/_jsxs(\"div\",{className:\"goal-tracker\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"goal-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Savings Goal\"}),isEditing?/*#__PURE__*/_jsxs(\"div\",{className:\"goal-edit\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:editValue,onChange:e=>setEditValue(Number(e.target.value)),className:\"goal-input\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,className:\"btn btn-sm\",children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsEditing(false),className:\"btn btn-sm btn-outline\",children:\"Cancel\"})]}):/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setIsEditing(true),className:\"btn btn-sm btn-outline\",children:[\"Edit Goal ($\",goal.toLocaleString(),\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"goal-progress\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"progress-fill\",style:{width:`${progressWidth}%`}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"progress-labels\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"$0\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",current.toLocaleString(),\" / $\",goal.toLocaleString()]})]})]})]});});// Placeholder for chart component (would use a library like Chart.js or D3)\nconst SavingsChart=/*#__PURE__*/memo(_ref4=>{let{data,timeRange}=_ref4;return/*#__PURE__*/_jsxs(\"div\",{className:\"savings-chart-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Savings Over Time\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-placeholder\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Chart showing savings progression over \",timeRange]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Data points: \",(data===null||data===void 0?void 0:data.length)||0]})]})]});});const SavingsInsights=/*#__PURE__*/memo(_ref5=>{let{metrics,trend,timeRange}=_ref5;const insights=useMemo(()=>{const tips=[];if(metrics.monthlyAverage<500){tips.push(\"Consider setting up automatic transfers to boost your savings rate.\");}if((trend===null||trend===void 0?void 0:trend.direction)==='down'){tips.push(\"Your savings rate has decreased recently. Review your budget to identify areas to cut back.\");}if(metrics.progressPercentage>75){tips.push(\"Great job! You're close to reaching your goal. Keep up the momentum!\");}return tips;},[metrics,trend]);return/*#__PURE__*/_jsxs(\"div\",{className:\"savings-insights\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Insights & Tips\"}),insights.length>0?/*#__PURE__*/_jsx(\"ul\",{className:\"insights-list\",children:insights.map((tip,index)=>/*#__PURE__*/_jsx(\"li\",{className:\"insight-item\",children:tip},index))}):/*#__PURE__*/_jsx(\"p\",{children:\"Keep tracking your savings to get personalized insights!\"})]});});SavingsTracker.displayName='SavingsTracker';TimeRangeButton.displayName='TimeRangeButton';SavingsCard.displayName='SavingsCard';GoalTracker.displayName='GoalTracker';SavingsChart.displayName='SavingsChart';SavingsInsights.displayName='SavingsInsights';export default SavingsTracker;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}