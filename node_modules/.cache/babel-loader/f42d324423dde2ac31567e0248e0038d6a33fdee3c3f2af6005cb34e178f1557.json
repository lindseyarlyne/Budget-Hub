{"ast":null,"code":"import React,{memo,useState,useCallback,useMemo}from'react';import{useFormValidation,useBudgetActions}from'../hooks';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EntryForm=/*#__PURE__*/memo(()=>{const[formData,setFormData]=useState({type:'expense',amount:'',category:'',description:'',date:new Date().toISOString().split('T')[0]});const{addBudgetEntry,loading}=useBudgetActions();// Form validation with memoized rules\nconst validationRules=useMemo(()=>({amount:{required:true,min:0.01,message:'Amount must be greater than 0'},category:{required:true,message:'Category is required'},description:{required:true,minLength:3,message:'Description must be at least 3 characters'}}),[]);const{errors,validate,isValid}=useFormValidation(formData,validationRules);// Memoized category options to prevent re-creation\nconst categoryOptions=useMemo(()=>{const expenseCategories=['Food & Dining','Transportation','Shopping','Entertainment','Bills & Utilities','Healthcare','Travel','Other'];const incomeCategories=['Salary','Freelance','Investment','Business','Other'];return formData.type==='expense'?expenseCategories:incomeCategories;},[formData.type]);// Optimized input handlers using useCallback\nconst handleInputChange=useCallback(field=>event=>{const value=event.target.value;setFormData(prev=>({...prev,[field]:field==='amount'?value===''?'':parseFloat(value)||0:value}));},[]);const handleTypeChange=useCallback(event=>{setFormData(prev=>({...prev,type:event.target.value,category:''// Reset category when type changes\n}));},[]);const handleSubmit=useCallback(async event=>{event.preventDefault();if(!validate()){return;}try{await addBudgetEntry(formData);// Reset form on success\nsetFormData({type:'expense',amount:'',category:'',description:'',date:new Date().toISOString().split('T')[0]});}catch(error){console.error('Failed to add entry:',error);}},[formData,validate,addBudgetEntry]);return/*#__PURE__*/_jsxs(\"div\",{className:\"entry-form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Add Budget Entry\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,noValidate:true,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"type\",children:\"Type\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"type\",value:formData.type,onChange:handleTypeChange,className:\"form-control\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"expense\",children:\"Expense\"}),/*#__PURE__*/_jsx(\"option\",{value:\"income\",children:\"Income\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"amount\",children:\"Amount\"}),/*#__PURE__*/_jsx(\"input\",{id:\"amount\",type:\"number\",min:\"0\",step:\"0.01\",value:formData.amount,onChange:handleInputChange('amount'),className:`form-control ${errors.amount?'error':''}`,placeholder:\"0.00\",\"aria-describedby\":errors.amount?'amount-error':undefined}),errors.amount&&/*#__PURE__*/_jsx(\"span\",{id:\"amount-error\",className:\"error-message\",role:\"alert\",children:errors.amount})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",children:\"Category\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"category\",value:formData.category,onChange:handleInputChange('category'),className:`form-control ${errors.category?'error':''}`,\"aria-describedby\":errors.category?'category-error':undefined,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a category\"}),categoryOptions.map(category=>/*#__PURE__*/_jsx(\"option\",{value:category,children:category},category))]}),errors.category&&/*#__PURE__*/_jsx(\"span\",{id:\"category-error\",className:\"error-message\",role:\"alert\",children:errors.category})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"date\",children:\"Date\"}),/*#__PURE__*/_jsx(\"input\",{id:\"date\",type:\"date\",value:formData.date,onChange:handleInputChange('date'),className:\"form-control\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Description\"}),/*#__PURE__*/_jsx(\"input\",{id:\"description\",type:\"text\",value:formData.description,onChange:handleInputChange('description'),className:`form-control ${errors.description?'error':''}`,placeholder:\"Enter a description\",\"aria-describedby\":errors.description?'description-error':undefined}),errors.description&&/*#__PURE__*/_jsx(\"span\",{id:\"description-error\",className:\"error-message\",role:\"alert\",children:errors.description})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!isValid||loading,className:\"btn btn-primary\",children:loading?'Adding...':`Add ${formData.type}`})})]})]});});EntryForm.displayName='EntryForm';export default EntryForm;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}