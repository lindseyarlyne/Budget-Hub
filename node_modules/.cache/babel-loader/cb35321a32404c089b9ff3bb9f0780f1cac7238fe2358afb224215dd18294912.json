{"ast":null,"code":"import React,{memo,useMemo,useCallback,useState}from'react';import{useVirtualizer,useBudgetData}from'../hooks';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PayPeriodList=/*#__PURE__*/memo(()=>{const{payPeriods,loading,error}=useBudgetData();const[sortBy,setSortBy]=useState('date');const[sortOrder,setSortOrder]=useState('desc');// Memoized sorted periods to prevent unnecessary sorting\nconst sortedPeriods=useMemo(()=>{if(!payPeriods)return[];return[...payPeriods].sort((a,b)=>{let aValue=a[sortBy];let bValue=b[sortBy];if(sortBy==='date'){aValue=new Date(aValue);bValue=new Date(bValue);}if(sortOrder==='asc'){return aValue>bValue?1:-1;}return aValue<bValue?1:-1;});},[payPeriods,sortBy,sortOrder]);// Virtual scrolling for performance with large lists\nconst{containerRef,itemRefs,visibleItems,scrollToIndex}=useVirtualizer({items:sortedPeriods,itemHeight:80,containerHeight:600});const handleSort=useCallback(field=>{if(sortBy===field){setSortOrder(prev=>prev==='asc'?'desc':'asc');}else{setSortBy(field);setSortOrder('desc');}},[sortBy]);const scrollToCurrentPeriod=useCallback(()=>{const currentIndex=sortedPeriods.findIndex(period=>period.isCurrent);if(currentIndex>=0){scrollToIndex(currentIndex);}},[sortedPeriods,scrollToIndex]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"pay-period-loading\",children:\"Loading pay periods...\"});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"pay-period-error\",children:[\"Error loading pay periods: \",error.message]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"pay-period-list\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pay-period-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Pay Periods\"}),/*#__PURE__*/_jsx(\"div\",{className:\"pay-period-controls\",children:/*#__PURE__*/_jsx(\"button\",{onClick:scrollToCurrentPeriod,className:\"btn btn-secondary\",children:\"Jump to Current\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pay-period-table\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"table-header\",children:[/*#__PURE__*/_jsx(SortableHeader,{field:\"date\",label:\"Date\",sortBy:sortBy,sortOrder:sortOrder,onSort:handleSort}),/*#__PURE__*/_jsx(SortableHeader,{field:\"income\",label:\"Income\",sortBy:sortBy,sortOrder:sortOrder,onSort:handleSort}),/*#__PURE__*/_jsx(SortableHeader,{field:\"expenses\",label:\"Expenses\",sortBy:sortBy,sortOrder:sortOrder,onSort:handleSort}),/*#__PURE__*/_jsx(SortableHeader,{field:\"remaining\",label:\"Remaining\",sortBy:sortBy,sortOrder:sortOrder,onSort:handleSort}),/*#__PURE__*/_jsx(\"div\",{className:\"table-header-cell\",children:\"Actions\"})]}),/*#__PURE__*/_jsx(\"div\",{ref:containerRef,className:\"table-body\",style:{height:'600px',overflow:'auto'},children:visibleItems.map(_ref=>{let{item:period,index}=_ref;return/*#__PURE__*/_jsx(PayPeriodRow,{ref:el=>itemRefs.current[index]=el,period:period,index:index},period.id);})})]}),sortedPeriods.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"pay-period-empty\",children:\"No pay periods found. Add some budget entries to see them here.\"})]});});// Memoized sortable header component\nconst SortableHeader=/*#__PURE__*/memo(_ref2=>{let{field,label,sortBy,sortOrder,onSort}=_ref2;return/*#__PURE__*/_jsxs(\"button\",{className:`table-header-cell sortable ${sortBy===field?'active':''}`,onClick:()=>onSort(field),children:[label,sortBy===field&&/*#__PURE__*/_jsx(\"span\",{className:`sort-icon ${sortOrder}`,children:sortOrder==='asc'?'↑':'↓'})]});});// Memoized row component for optimal rendering\nconst PayPeriodRow=/*#__PURE__*/memo(/*#__PURE__*/React.forwardRef((_ref3,ref)=>{let{period,index}=_ref3;const handleViewDetails=useCallback(()=>{// Navigate to detailed view\nconsole.log('View details for period:',period.id);},[period.id]);const handleEdit=useCallback(()=>{// Open edit modal\nconsole.log('Edit period:',period.id);},[period.id]);return/*#__PURE__*/_jsxs(\"div\",{ref:ref,className:`table-row ${period.isCurrent?'current':''} ${index%2===0?'even':'odd'}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"table-cell\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"period-date\",children:[new Date(period.startDate).toLocaleDateString(),\" -\",new Date(period.endDate).toLocaleDateString()]}),period.isCurrent&&/*#__PURE__*/_jsx(\"span\",{className:\"current-badge\",children:\"Current\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"table-cell income\",children:[\"$\",period.totalIncome.toLocaleString()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"table-cell expense\",children:[\"$\",period.totalExpenses.toLocaleString()]}),/*#__PURE__*/_jsxs(\"div\",{className:`table-cell remaining ${period.remaining>=0?'positive':'negative'}`,children:[\"$\",period.remaining.toLocaleString()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"table-cell actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleViewDetails,className:\"btn btn-sm btn-outline\",children:\"View\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleEdit,className:\"btn btn-sm btn-outline\",children:\"Edit\"})]})]});}));PayPeriodList.displayName='PayPeriodList';SortableHeader.displayName='SortableHeader';PayPeriodRow.displayName='PayPeriodRow';export default PayPeriodList;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}